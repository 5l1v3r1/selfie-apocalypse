(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var renderer, scene, camera, cube, mesh, videoTexture, composer, dotScreenEffect, rgbEffect, mouseX, mouseY, shader;
mouseX = mouseY = 1;
var video = document.getElementById('localVideo');
document.addEventListener("mousemove", onMouseMove);


var webrtc = new SimpleWebRTC({
	localVideoEl: 'localVideo',
	remoteVideosEl: 'remoteVideo',
	autoRequestMedia: true
});

webrtc.on('readyToCall', function () {
	webrtc.joinRoom('My room name');
	console.log("joined room!");
	initWebGL();
});

function initWebGL(){
	renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				//

				camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.z = 400;

				scene = new THREE.Scene();
				var geometry = new THREE.PlaneGeometry( window.innerWidth, window.innerHeight);
				videoTexture = new THREE.Texture( video );
				videoTexture.wrapS = THREE.MirroredRepeatWrapping;
				videoTexture.wrapT = THREE.RepeatWrapping;	
				videoTexture.minFilter = THREE.LinearFilter;
				videoTexture.magFilter = THREE.LinearFilter;
				videoTexture.format = THREE.RGBFormat;

				var material = new THREE.MeshBasicMaterial( { map: videoTexture} );

				mesh = new THREE.Mesh( geometry, material );
				scene.add( mesh );
				initEffects();
				render();
				//
}

function initEffects(){
	// postprocessing
composer = new THREE.EffectComposer( renderer );
composer.addPass( new THREE.RenderPass( scene, camera ) );

dotScreenEffect = new THREE.ShaderPass( THREE.DotScreenShader );
dotScreenEffect.uniforms[ 'scale' ].value = 0.8;
composer.addPass( dotScreenEffect );

rgbEffect = new THREE.ShaderPass( THREE.RGBShiftShader );
rgbEffect.uniforms[ 'amount' ].value = 0.0015;
rgbEffect.renderToScreen = true;
//shader = new THREE.ShaderPass(THREE.KaleidoShader);
//rgbEffect.renderToScreen = true;
composer.addPass( rgbEffect);
}
	

function onMouseMove(e){
	mouseX = e.pageX;
	mouseY = e.pageY;
}

function render() {
	requestAnimationFrame( render );
	videoTexture.needsUpdate = true;
	//shader.uniforms[ 'sides' ].value = Math.floor(mouseY*0.03);
	//shader.uniforms[ 'angle' ].value +=0.01;
	dotScreenEffect.uniforms[ 'scale' ].value = mouseX * 0.01;
	rgbEffect.uniforms[ 'amount' ].value = mouseY*0.001;
	//renderer.render( scene, camera );
	composer.render();
}



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvb2phY2svY29kZS9WSURFT19NSVhFUi9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBSSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztBQUNwSCxNQUFNLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUNwQixJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2xELFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDcEQ7O0FBRUEsSUFBSSxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUM7Q0FDN0IsWUFBWSxFQUFFLFlBQVk7Q0FDMUIsY0FBYyxFQUFFLGFBQWE7Q0FDN0IsZ0JBQWdCLEVBQUUsSUFBSTtBQUN2QixDQUFDLENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxZQUFZLENBQUM7Q0FDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztDQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0NBQzVCLFNBQVMsRUFBRSxDQUFDO0FBQ2IsQ0FBQyxDQUFDLENBQUM7O0FBRUgsU0FBUyxTQUFTLEVBQUUsQ0FBQztDQUNwQixRQUFRLEdBQUcsSUFBSSxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDbEMsUUFBUSxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNsRCxRQUFRLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUUs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QUcsSUFBSSxDQUFDO0FBQzNELENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQzs7Q0FFcEQsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ25CLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBjdWJlLCBtZXNoLCB2aWRlb1RleHR1cmUsIGNvbXBvc2VyLCBkb3RTY3JlZW5FZmZlY3QsIHJnYkVmZmVjdCwgbW91c2VYLCBtb3VzZVksIHNoYWRlcjtcbm1vdXNlWCA9IG1vdXNlWSA9IDE7XG52YXIgdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYWxWaWRlbycpO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdXNlTW92ZSk7XG5cblxudmFyIHdlYnJ0YyA9IG5ldyBTaW1wbGVXZWJSVEMoe1xuXHRsb2NhbFZpZGVvRWw6ICdsb2NhbFZpZGVvJyxcblx0cmVtb3RlVmlkZW9zRWw6ICdyZW1vdGVWaWRlbycsXG5cdGF1dG9SZXF1ZXN0TWVkaWE6IHRydWVcbn0pO1xuXG53ZWJydGMub24oJ3JlYWR5VG9DYWxsJywgZnVuY3Rpb24gKCkge1xuXHR3ZWJydGMuam9pblJvb20oJ015IHJvb20gbmFtZScpO1xuXHRjb25zb2xlLmxvZyhcImpvaW5lZCByb29tIVwiKTtcblx0aW5pdFdlYkdMKCk7XG59KTtcblxuZnVuY3Rpb24gaW5pdFdlYkdMKCl7XG5cdHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcblx0XHRcdFx0cmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyggd2luZG93LmRldmljZVBpeGVsUmF0aW8gKTtcblx0XHRcdFx0cmVuZGVyZXIuc2V0U2l6ZSggd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCApO1xuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCByZW5kZXJlci5kb21FbGVtZW50ICk7XG5cblx0XHRcdFx0Ly9cblxuXHRcdFx0XHRjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDcwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMSwgMTAwMCApO1xuXHRcdFx0XHRjYW1lcmEucG9zaXRpb24ueiA9IDQwMDtcblxuXHRcdFx0XHRzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHRcdFx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSggd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdFx0XHRcdHZpZGVvVGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKCB2aWRlbyApO1xuXHRcdFx0XHR2aWRlb1RleHR1cmUud3JhcFMgPSBUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nO1xuXHRcdFx0XHR2aWRlb1RleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcdFxuXHRcdFx0XHR2aWRlb1RleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xuXHRcdFx0XHR2aWRlb1RleHR1cmUubWFnRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xuXHRcdFx0XHR2aWRlb1RleHR1cmUuZm9ybWF0ID0gVEhSRUUuUkdCRm9ybWF0O1xuXG5cdFx0XHRcdHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCggeyBtYXA6IHZpZGVvVGV4dHVyZX0gKTtcblxuXHRcdFx0XHRtZXNoID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXHRcdFx0XHRzY2VuZS5hZGQoIG1lc2ggKTtcblx0XHRcdFx0aW5pdEVmZmVjdHMoKTtcblx0XHRcdFx0cmVuZGVyKCk7XG5cdFx0XHRcdC8vXG59XG5cbmZ1bmN0aW9uIGluaXRFZmZlY3RzKCl7XG5cdC8vIHBvc3Rwcm9jZXNzaW5nXG5jb21wb3NlciA9IG5ldyBUSFJFRS5FZmZlY3RDb21wb3NlciggcmVuZGVyZXIgKTtcbmNvbXBvc2VyLmFkZFBhc3MoIG5ldyBUSFJFRS5SZW5kZXJQYXNzKCBzY2VuZSwgY2FtZXJhICkgKTtcblxuZG90U2NyZWVuRWZmZWN0ID0gbmV3IFRIUkVFLlNoYWRlclBhc3MoIFRIUkVFLkRvdFNjcmVlblNoYWRlciApO1xuZG90U2NyZWVuRWZmZWN0LnVuaWZvcm1zWyAnc2NhbGUnIF0udmFsdWUgPSAwLjg7XG5jb21wb3Nlci5hZGRQYXNzKCBkb3RTY3JlZW5FZmZlY3QgKTtcblxucmdiRWZmZWN0ID0gbmV3IFRIUkVFLlNoYWRlclBhc3MoIFRIUkVFLlJHQlNoaWZ0U2hhZGVyICk7XG5yZ2JFZmZlY3QudW5pZm9ybXNbICdhbW91bnQnIF0udmFsdWUgPSAwLjAwMTU7XG5yZ2JFZmZlY3QucmVuZGVyVG9TY3JlZW4gPSB0cnVlO1xuLy9zaGFkZXIgPSBuZXcgVEhSRUUuU2hhZGVyUGFzcyhUSFJFRS5LYWxlaWRvU2hhZGVyKTtcbi8vcmdiRWZmZWN0LnJlbmRlclRvU2NyZWVuID0gdHJ1ZTtcbmNvbXBvc2VyLmFkZFBhc3MoIHJnYkVmZmVjdCk7XG59XG5cdFxuXG5mdW5jdGlvbiBvbk1vdXNlTW92ZShlKXtcblx0bW91c2VYID0gZS5wYWdlWDtcblx0bW91c2VZID0gZS5wYWdlWTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHJlbmRlciApO1xuXHR2aWRlb1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHQvL3NoYWRlci51bmlmb3Jtc1sgJ3NpZGVzJyBdLnZhbHVlID0gTWF0aC5mbG9vcihtb3VzZVkqMC4wMyk7XG5cdC8vc2hhZGVyLnVuaWZvcm1zWyAnYW5nbGUnIF0udmFsdWUgKz0wLjAxO1xuXHRkb3RTY3JlZW5FZmZlY3QudW5pZm9ybXNbICdzY2FsZScgXS52YWx1ZSA9IG1vdXNlWCAqIDAuMDE7XG5cdHJnYkVmZmVjdC51bmlmb3Jtc1sgJ2Ftb3VudCcgXS52YWx1ZSA9IG1vdXNlWSowLjAwMTtcblx0Ly9yZW5kZXJlci5yZW5kZXIoIHNjZW5lLCBjYW1lcmEgKTtcblx0Y29tcG9zZXIucmVuZGVyKCk7XG59XG5cbiJdfQ==
